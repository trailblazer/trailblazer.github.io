<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Trailblazer: Reform Prepopulators</title>
<meta name="description" content="Reform Prepopulators - Trailblazer">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content=", ">

<!-- style -->
<link rel="shortcut icon" href="/favicon.ico">
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,%20400,700,800%7CRaleway:400,200,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/css/application.css">

<!-- script -->
<script src="/javascripts/jquery.min.js"></script>
<script src="/javascripts/application.min.js"></script>
<script>
  jQuery(document).ready(function($) {
    $(document).foundation();

    anchors.add("article h2");
    anchors.add("article h3");

    hljs.configure({
      languages: ['ruby', 'haml']
    });

    hljs.initHighlightingOnLoad();

    // $('#code-slider').slick({arrows: true, dots: true});
    $('.carousel').slick({arrows: true, dots: true});
  });
</script>


<meta property="og:title" content="Reform Prepopulators">
<meta property="og:site_name" content="Trailblazer">
<meta property="og:url" content="http://trailblazer.to/gems/reform/prepopulator.html">
<meta property="og:description" content="">
<meta property="og:image" content="http://trailblazer.to/images/go-trailblazer.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@apotonick">
<meta name="twitter:title" content="Reform Prepopulators">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="http://trailblazer.to/images/go-trailblazer.jpg">

  </head>
  <body>


  <!--
    <div class="secondary callout" data-closable>
      <strong>TRB JOBS:</strong> Deutschsprachiger Ruby Developer in Hannover - <a href="/inc/jobs.html">Jaaaa!</a>
      <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  -->

      <a class="notice" style="display: block; overflow: hidden; position: relative; width: 100%; padding: 0.6rem 0; background-color: #3b5998;" href="http://fb.me/trailblazer.to">
    <div class="info" style="text-align: center;">
      <h5 style="font-size: 0.9rem; color: white; font-weight: bold;">
        <i class="fa fa-facebook-square" aria-hidden="true" style="font-size: 1.2rem;"></i>
        LIKE US FOR UPDATES + GET A FREE STICKER PACK!
      </h5>
    </div>
  </a>


    <div data-sticky-container class="top-navbar">
  <div class="top-bar sticky" data-sticky data-options="marginTop:0;" style="width:100%">
    <div class="top-bar-title">
      <ul class="menu horizontal">
        <li>
          <a href="/"><img style="height: 25px;" src="/images/logo-top.svg"></a>
        </li>
        <li>
        <span data-responsive-toggle="responsive-menu" data-hide-for="medium">
          <button class="menu-icon" type="button" data-toggle></button>
        </span>
        </li>
      </ul>
    </div>

    <div id="responsive-menu">
      <div class="top-bar-right">
        <ul class="dropdown menu     vertical medium-horizontal" data-dropdown-menu>
          <li><a href="/gems/operation/2.0/release_notes.html">TRB 2.1 IS COMING!</a></li>
          <li><a href="https://trbpro.herokuapp.com/">PREMIUM SUPPORT <img alt="Premium Support" src="/images/pro-white.png"></a></li>
          <li><a href="/newsletter/">NEWSLETTER</a></li>
          <li><a href="https://gitter.im/trailblazer/chat" onclick="trackOutboundLink('https://gitter.im/trailblazer/chat'); return false;">CHAT</a></li>
          <li><a href="/guides">LEARN</a></li>
          <li>
            <a href="#">GEMS</a>
            <ul class="menu vertical">
              <li class=""><a href="/gems/cells">CELLS</a></li>
              <li class=""><a href="/gems/operation/2.0/index.html">OPERATION</a></li>
              <li class=""><a href="/gems/reform">REFORM</a></li>
              <li class=""><a href="/gems/representable">REPRESENTABLE</a></li>
              <li class=""><a href="/gems/roar">ROAR</a></li>
              <li class=""><a href="/gems/disposable">DISPOSABLE</a></li>
            </ul>
          </li>
          <li>
            <a href="https://leanpub.com/trailblazer" class="button secondary" onclick="trackOutboundLink('https://leanpub.com/trailblazer'); return false;">GET THE BOOK</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


    <!-- Hero -->
<div class="hero gems-hero reform-hero">
  <div class="hero-unit">
    <div class="expanded row">
      <div class="columns">
        <h1 id="project_title">
          Reform
        </h1>
      </div>
    </div>
  </div>
</div>


    <div class="expanded row">
      <div class="medium-9 large-10 medium-push-3 large-push-2 columns">
        <article class="reform-body">

          
            <header id="doc-header">
  <h1 class="doc-page-title">Reform Prepopulators</h1>
  <span class="doc-last-updated"><i class="fa fa-clock-o" aria-hidden="true"></i> Last updated 05 May 2017</span>

  
    <span class="doc-last-updated">
      <i class="fa fa-diamond" aria-hidden="true"></i>
      <a href="https://github.com/trailblazer/reform">reform</a>

      <a href="/gems/reform/prepopulator.html">
      <span class="version">v2.2</span>
      </a>

    

    </span>
  

  <hr>

</header>

          

          <div class="row"> <!-- nach doc header -->
            <div class="large-9 columns" id="docs">   <!-- actual docs -->
              <h1 id="prepopulating">Prepopulating</h1>

<p>Reform has two completely separated modes for form setup. One when rendering the form and one when populating the form in <code class="highlighter-rouge">validate</code>.</p>

<p><a href="/gems/reform/prepopulator.html">Prepopulating</a> is helpful when you want to fill out fields (aka. <em>defaults</em>) or add nested forms before rendering.</p>

<p><a href="/gems/reform/populators.html">Populating</a> is invoked in <code class="highlighter-rouge">validate</code> and will add nested forms depending on the incoming hash.</p>

<p>This page explains prepopulation used to prepare the form for rendering.</p>

<h2 id="configuration" data-magellan-target="configuration">Configuration</h2>

<p>You can use the <code class="highlighter-rouge">:prepopulator</code> option on every property or collection.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class AlbumForm &lt; Reform::Form
  property :artist, prepopulator: -&gt;(options) { self.artist = Artist.new } do
    property :name
  end
</code></pre>
</div>

<p>The option value can be a lambda or an instance method name.</p>

<p>In the block/method, you have access to the form API and can invoke any kind of logic to prepopulate your form. Note you need to assign models for nested form using their writers.</p>

<h2 id="invocation" data-magellan-target="invocation">Invocation</h2>

<p>Prepopulation must be invoked manually.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>form = AlbumForm.new(Album.new)
form.artist #=&gt; nil

form.prepopulate!

form.artist #=&gt; &lt;nested ArtistForm @model=&lt;Artist ..&gt;&gt;
</code></pre>
</div>

<p>This explicit call must happen before the form gets rendered. For instance, in Trailblazer, this happens in the controller action.</p>

<h2 id="prepopulate-is-not-populate" data-magellan-target="prepopulate-is-not-populate">Prepopulate is not Populate</h2>

<p><code class="highlighter-rouge">:populator</code> and <code class="highlighter-rouge">:populate_if_empty</code> will be run automatically in <code class="highlighter-rouge">validate</code>. Do not call <code class="highlighter-rouge">prepopulate!</code> before <code class="highlighter-rouge">validate</code> if you use the populator options. This will usually result in “more” nested forms being added as you wanted (unless you know what you’re doing).</p>

<p>Prepopulators are a concept designed to <strong>prepare a form for rendering</strong>, whereas populators are meant to <strong>set up the form in <code class="highlighter-rouge">validate</code></strong> when the input hash is deserialized.</p>

<p>This is explained in the <em>Nested Forms</em> chapter of the Trailblazer book. Please read it first if you have trouble understanding this, and then open an issue.</p>

<h2 id="options" data-magellan-target="options">Options</h2>

<p>Options may be passed. They will be available in the <code class="highlighter-rouge">:prepopulator</code> block.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class AlbumForm &lt; Reform::Form
  property :title, prepopulator: -&gt;(options) { self.title = options[:def_title] }
end
</code></pre>
</div>

<p>You can then pass arbitrary arguments to <code class="highlighter-rouge">prepopulate!</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>form.title #=&gt; nil

form.prepopulate!(def_title: "Roxanne")

form.title #=&gt; "Roxanne"
</code></pre>
</div>

<p>The arguments passed to the <code class="highlighter-rouge">prepopulate!</code> call will be passed straight to the block/method.</p>

<p>This call will be applied to the entire nested form graph recursively <em>after</em> the currently traversed form’s prepopulators were run.</p>

<h2 id="execution" data-magellan-target="execution">Execution</h2>

<p>The blocks are run in form instance context, meaning you have access to all possible data you might need. With a symbol, the same-named method will be called on the form instance, too.</p>

<p>Note that you have to assign the pre-populated values to the form by using setters. In turn, the form will automatically create nested forms for you.</p>

<p>This is especially cool when populating collections.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>property :songs,
  prepopulator: -&gt;(*) { self.songs &lt;&lt; Song.new if songs.size &lt; 3 } do
</code></pre>
</div>

<p>This will always add an empty song form to the nested <code class="highlighter-rouge">songs</code> collection until three songs are attached. You can use the <code class="highlighter-rouge">Twin::Collection</code> <a href="/gems/disposable/collection.html">API</a> when adding, changing or deleting items from a collection.</p>

<p>Note that when calling <code class="highlighter-rouge">#prepopulate!</code>, your <code class="highlighter-rouge">:prepopulate</code> code for all existing forms in the graph will <em>be executed</em> . It is up to you to add checks if you need that.</p>

<h2 id="overriding" data-magellan-target="overriding">Overriding</h2>

<p>You don’t have to use the <code class="highlighter-rouge">:prepopulator</code> option. Instead, you can simply override <code class="highlighter-rouge">#prepopulate!</code> itself.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class AlbumForm &lt; Reform::Form
  def prepopulate!(options)
    self.title = "Roxanne"
    self.artist = Artist.new(name: "The Police")
  end
</code></pre>
</div>

<h1 id="defaults">Defaults</h1>

<p>There’s different alternatives for setting a default value for a formerly empty field.</p>

<ol>
  <li>Use <code class="highlighter-rouge">:prepopulator</code> as <a href="#configuration">described here</a>. Don’t forget to call <code class="highlighter-rouge">prepopulate!</code> before rendering the form.</li>
  <li>
    <p>Override the reader of the property. This is not recommended as you might screw things up. Remember that the property reader is called for presentation (in the form builder) and for validation in <code class="highlighter-rouge">#validate</code>.</p>

    <div class="highlighter-rouge">
<pre class="highlight"><code>property :title

def title
  super or "Unnamed"
end
</code></pre>
    </div>
  </li>
</ol>

            </div>

            <div class="large-3 columns sticky-container" data-sticky-container>

              
                <nav class="sticky columns docs-toc-wrap sticky is-anchored is-at-top side-nav" data-sticky data-anchor="docs" data-sticky-on="large" data-margin-top="5">
  
        <ul class="vertical menu" data-magellan id="page-toc">
          <li class="page-toc-heading">ON THIS PAGE:</li>
          <li><a href="#configuration">Configuration</a></li>
<li><a href="#invocation">Invocation</a></li>
<li><a href="#prepopulate-is-not-populate">Prepopulate is not Populate</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#execution">Execution</a></li>
<li><a href="#overriding">Overriding</a></li>
        </ul>
      
</nav>

              

            </div>
          </div>
        </article>
      </div>

      <div class="medium-3 large-2 medium-pull-9 large-pull-10 columns">
        <ul id="sidebar" class="side-nav accordion" data-accordion>
  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>OPERATION</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/operation/2.0/index.html">Overview</a></li>
        <li><a href="/gems/operation/2.0/api.html">API</a></li>
        <li><a href="/gems/operation/2.0/contract.html">Contract</a></li>
        <!--<li><a href="/gems/operation/2.0/representer.html">Representer</a></li>-->
        <li><a href="/gems/operation/2.0/policy.html">Policy</a></li>
        <li><a href="/gems/operation/2.0/representer.html">Representer</a></li>
        <!--<li><a href="/gems/operation/2.0/pipetree.html">Pipetree</a></li>-->
        <li><a href="/gems/operation/2.0/endpoint.html">Endpoint</a></li>
        <li>
<a href="/gems/operation/1.1/index.html">
            <span class="sidebar-info">→ v1.1</span>
          </a>
        </li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>TRAILBLAZER</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/trailblazer/index.html">Overview</a></li>
        <li><a href="/gems/trailblazer/2.0/rails.html">Rails</a></li>
        <li><a href="/gems/trailblazer/2.0/test.html">Test</a></li>
        <li><a href="/gems/trailblazer/loader.html">Loader</a></li>
        <li><a href="/gems/trailblazer/upgrading-1-to-2.html">Upgrading</a></li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>CELLS</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/cells">Overview</a></li>
        <li><a href="/gems/cells/getting-started.html">Getting Started<span class="sidebar-info">NEW</span></a></li>
        <li><a href="/gems/cells/api.html">API</a></li>
        <li><a href="/gems/cells/trailblazer.html">Trailblazer::Cell</a></li>
        <li><a href="/gems/cells/testing.html">Testing</a></li>
        <li><a href="/gems/cells/render.html">Rendering</a></li>
        <li><a href="/gems/cells/rails.html">Rails</a></li>
        <li><a href="/gems/cells/templates.html">Templates</a></li>
        <li><a href="/gems/cells/troubleshooting.html">Troubleshooting</a></li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>REFORM</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/reform/index.html">Overview</a></li>
        <li><a href="/gems/reform/api.html">API</a></li>
        <li><a href="/gems/reform/options.html">Options</a></li>
        <li><a href="/gems/reform/data-types.html">Data Types</a></li>
        <li><a href="/gems/reform/populator.html">Populator</a></li>
        <li><a href="/gems/reform/prepopulator.html" class="active">Prepopulator</a></li>
        <li><a href="/gems/reform/validation.html">Validation</a></li>
        <li><a href="/gems/reform/rails.html">Rails</a></li>
        <li><a href="/gems/reform/debugging.html">Debugging</a></li>
        <li><a href="/gems/reform/upgrading-guide.html">Upgrading Guide</a></li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>REPRESENTABLE</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/representable">Overview</a></li>
        <li><a href="/gems/representable/getting-started.html">Getting Started</a></li>
        <li><a href="/gems/representable/3.0/api.html">API</a></li>
        <li><a href="/gems/representable/3.0/function-api.html">Function API</a></li>
        <li><a href="/gems/representable/3.0/populator.html">Populator</a></li>
        <!--<li><a href="/gems/representable/architecture.html">Architecture</a></li>-->
        <li><a href="/gems/representable/3.0/xml.html">XML</a></li>
        <li><a href="/gems/representable/3.0/yaml.html">YAML</a></li>
        <li><a href="/gems/representable/upgrading-guide.html">Upgrading Guide</a></li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>ROAR</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/roar/index.html">Overview</a></li>
        <li><a href="/gems/roar/jsonapi.html">JSON API</a></li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>DISPOSABLE</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/gems/disposable/index.html">Overview</a></li>
        <li><a href="/gems/disposable/api.html">API</a></li>
        <li><a href="/gems/disposable/default.html">Default</a></li>
        <li><a href="/gems/disposable/callback.html">Callback</a></li>
      </ul>
    </div>
  </li>

  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong>GUIDES</strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="/guides/index.html">Overview</a></li>
        <li><a href="/guides/trailblazer/2.0/01-operation-basics.html">01 - Operation Basics</a></li>
        <li><a href="/guides/trailblazer/2.0/02-trailblazer-basics.html">02 - Trailblazer Basics</a></li>
        <li><a href="/guides/trailblazer/2.0/03-rails-basics.html">03 - Rails Basics</a></li>
      </ul>
    </div>
  </li>

  <!--
  <li class="accordion-item" data-accordion-item>
    <a href="#" class="accordion-title">
      <i class="fa fa-caret-square-o-right" aria-hidden="true"></i>
      <strong></strong>
    </a>
    <div class="accordion-content" data-tab-content>
      <ul class="vertical menu">
        <li><a href="">Overview</a></li>
        
      </ul>
    </div>
  </li>

  -->
</ul>

<script>
  (function (document, window) {
    var $sidebar = $('#sidebar');
    var $items = $sidebar.find('.accordion-item')
    var currentPath = window.location.pathname;

    $items.each(function (i, elem) {
      var $elem = $(elem);
      var linkHref = $elem
        .find('.accordion-content li:first-child a')
        .attr('href')
        .replace('index.html', '');

      if (currentPath.indexOf(linkHref) !== -1) {
        $elem.addClass('is-active')
      }
    })
  })(document, window);
</script>

      </div>
    </div>


    <section class="top-footer">
  <div class="row">
    <div class="columns medium-6">
      <h3>Newsletter</h3>
      <p>
        Stay on top of what’s happening in Trailblazer.
      </p>
        <div class="row">
          <div id="mc_embed_signup">
            <form action="//trailblazerb.us8.list-manage.com/subscribe/post?u=bbe5021ab6fbdc94a16f0d036&amp;id=a69f6e4652" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>

              <div class="columns large-9 medium-12 ">
                <div class="row collapse prefix-radius">
                  <div class="small-8 medium-7 large-8 columns">
                    <div id="mc_embed_signup_scroll">
                      <div class="mc-field-group">
                        <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="youremail@trailblazer.to">
                      </div>
                      <div id="mce-responses" class="clear">
                        <div class="response" id="mce-error-response" style="display:none"></div>
                        <div class="response" id="mce-success-response" style="display:none"></div>
                      </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_bbe5021ab6fbdc94a16f0d036_a69f6e4652" tabindex="-1" value=""></div>

                    </div>
                  </div>
                  <div class="small-4 medium-5 large-4 columns">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button postfix secondary">
                  </div>
                </div>
              </div>
            </form>
          </div>
          <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
        </div>
      <p>
        And check out the <a href="/newsletter/">archive of newsletters</a>!
      </p>


    </div>
    <div class="columns medium-6">
      <h3>The Book</h3>
      <p>Learn how to build a Rails app with Trailblazer, step-by-step.</p>
      <a href="https://leanpub.com/trailblazer" class="button secondary">Get the book!</a>
    </div>
  </div>
</section>

<footer>
  <div class="row">
    <div class="columns medium-4">
      <div class="logo-box">
        <a href="/"><img src="/images/icon_trb.png">
        </a>
      </div>
    </div>
    <div class="columns medium-8">
      <div class="row">
        <div class="columns medium-6">
          <h4>
            Trailblazer
          </h4>
          <ul class="no-bullet">
            <li><a href="https://gitter.im/trailblazer/chat">Gitter chat</a></li>
            <li><a href="https://leanpub.com/trailblazer" onclick="trackOutboundLink('https://leanpub.com/trailblazer'); return false;">The book</a></li>
          </ul>
        </div>
        <div class="columns medium-6">
          <h4>
            Follow Us
          </h4>
          <ul class="menu">
            <li>
              <a href="https://github.com/trailblazer">
                <i class="footer-icon github-icon"></i>
              </a>
            </li>
            <li>
              <a href="https://twitter.com/trailblazer.to">
                <i class="footer-icon twitter-icon"></i>
              </a>
            </li>
            <li>
              <a href="https://facebook.com/trailblazer.to">
                <i class="footer-icon facebook-icon"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <p class="copyright">
        Trailblazer is created by <a href="http://www.synergysoft.com.sg/">Synergy Software Solutions Pte Ltd,</a> and awesome friends.
      </p>
      <p class="copyright">
        Site designed and handcoded with love by <a href="https://twitter.com/noeliacabane">Noelia Cabane</a>
      </p>
    </div>
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69514939-1', 'auto');
  ga('send', 'pageview');

  /**
  * Function that tracks a click on an outbound link in Analytics.
  * This function takes a valid URL string as an argument, and uses that URL string
  * as the event label. Setting the transport method to 'beacon' lets the hit be sent
  * using 'navigator.sendBeacon' in browser that support it.
  */
  var trackOutboundLink = function(url) {
     ga('send', 'event', 'outbound', 'click', url, {
       'transport': 'beacon',
       'hitCallback': function(){document.location = url;}
     });
  }
</script>



  </body>
</html>
