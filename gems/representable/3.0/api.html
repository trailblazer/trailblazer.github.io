<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Trailblazer: Representable API</title>
<meta name="description" content="Representable API - Trailblazer">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content=", ">

<!-- style -->
<link rel="shortcut icon" href="/favicon.ico">
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,%20400,700,800%7CRaleway:400,200,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/css/application.css">

<!-- script -->
<script src="/javascripts/jquery.min.js"></script>
<script src="/javascripts/application.min.js"></script>
<script>
  jQuery(document).ready(function($) {
    $(document).foundation();

    anchors.add("article h2");
    anchors.add("article h3");

    hljs.configure({
      languages: ['ruby', 'haml']
    });

    hljs.initHighlightingOnLoad();

    // $('#code-slider').slick({arrows: true, dots: true});
    $('.carousel').slick({arrows: true, dots: true});
  });
</script>


<meta property="og:title" content="Representable API">
<meta property="og:site_name" content="Trailblazer">
<meta property="og:url" content="http://trailblazer.to/gems/representable/3.0/api.html">
<meta property="og:description" content="">
<meta property="og:image" content="http://trailblazer.to/images/go-trailblazer.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@apotonick">
<meta name="twitter:title" content="Representable API">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="http://trailblazer.to/images/go-trailblazer.jpg">

  </head>
  <body>

    <div data-sticky-container class="top-navbar">
  <div class="top-bar sticky" data-sticky data-options="marginTop:0;" style="width:100%">
    <div class="top-bar-title">
      <ul class="menu horizontal">
        <li>
          <a href="/"><img style="height: 25px;" src="/images/logo-top.svg"></a>
        </li>
        <li>
        <span data-responsive-toggle="responsive-menu" data-hide-for="medium">
          <button class="menu-icon" type="button" data-toggle></button>
        </span>
        </li>
      </ul>
    </div>

    <div id="responsive-menu">
      <div class="top-bar-right">
        <ul class="dropdown menu     vertical medium-horizontal" data-dropdown-menu>
          <li><a href="/gems/operation/2.0/release_notes.html">TRB 2.O IS COMING!</a></li>
          <li><a href="https://trbpro.herokuapp.com/">PREMIUM SUPPORT <img alt="Premium Support" src="/images/pro-white.png"></a></li>
          <li><a href="/newsletter/">NEWSLETTER</a></li>
          <li><a href="https://gitter.im/trailblazer/chat" onclick="trackOutboundLink('https://gitter.im/trailblazer/chat'); return false;">CHAT</a></li>
          <li><a href="/guides">GUIDES</a></li>
          <li>
            <a href="#">GEMS</a>
            <ul class="menu vertical">
              <li class=""><a href="/gems/cells">CELLS</a></li>
              <li class=""><a href="/gems/operation/index.html">OPERATION</a></li>
              <li class=""><a href="/gems/reform">REFORM</a></li>
              <li class=""><a href="/gems/representable">REPRESENTABLE</a></li>
              <li class=""><a href="/gems/roar">ROAR</a></li>
              <li class=""><a href="/gems/disposable">DISPOSABLE</a></li>
            </ul>
          </li>
          <li>
            <a href="https://leanpub.com/trailblazer" class="button secondary" onclick="trackOutboundLink('https://leanpub.com/trailblazer'); return false;">GET THE BOOK</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


    <!-- Hero -->
<div class="hero gems-hero representable-hero">
  <div class="hero-unit">
    <div class="expanded row">
      <div class="columns">
        <h1 id="project_title">
          Representable
        </h1>
      </div>
    </div>
  </div>
</div>


    <div class="expanded row">
      <div class="medium-9 large-10 medium-push-3 large-push-2 columns">
        <article class="representable-body">

          
            <header id="doc-header">
  <h1 class="doc-page-title">Representable API</h1>
  <span class="doc-last-updated"><i class="fa fa-clock-o" aria-hidden="true"></i> Last updated 29 September 2016</span>

  

  <hr>

</header>

          

          <div class="row"> <!-- nach doc header -->
            <div class="large-9 columns" id="docs">   <!-- actual docs -->
              <h1 id="representable-api">Representable API</h1>

<p>In Representable, we differentiate between three APIs.</p>

<p>The <a href="#declarative-api">declarative API</a> is how we define representers. You can learn how to use those representers by reading about the very brief <a href="#public-api">public API</a>. Representable is extendable without having to hack existing code: the <a href="function-api.html">function API</a> documents how to use its options to achieve what you need.</p>

<h2 id="declarative-api" data-magellan-target="declarative-api">Declarative API</h2>

<p>To render objects to documents or parse documents to objects, you need to define a representer.</p>

<p>A representer can either be a class (called <em>decorator</em>) or a module (called <em>representer module</em>). Throughout the docs, we will use decorators as they are cleaner and faster, but keep in mind you can also use modules.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>require 'representable/json'

class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :id
  property :title
end
</code></pre>
</div>

<p>A representer simply defines the fields that will be mapped to the document using <code class="highlighter-rouge">property</code> or <code class="highlighter-rouge">collection</code>. You can then decorate an object and render or parse. Here’s an example.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>SongRepresenter.new(song).to_json #=&gt; {"id": 1, title":"Fallout"}
</code></pre>
</div>

<p>The details are being discussed in the <a href="#public-api">public API</a> section.</p>

<h3 id="representer-modules">Representer Modules</h3>

<p>Instead of using classes as representers, you can also leverage modules which will then get mixed into the represented object.</p>

<p>A representer module is also a good way to share configuration and logic across decorators.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>module SongRepresenter
  include Representable::JSON

  property :id
  property :title
end
</code></pre>
</div>

<p>The API in a module representer is identical to decorators. However, the way you apply them is different.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>song.extend(SongRepresenter).to_json #=&gt; {"id": 1, title":"Fallout"}
</code></pre>
</div>

<p>There’s two drawbacks with this approach.</p>

<ol>
  <li>You pollute the represented object with the imported representer methods (e.g. <code class="highlighter-rouge">to_json</code>).</li>
  <li>Extending an object at run-time is costly and with many <code class="highlighter-rouge">extend</code>s there will be a noteable performance decrease.</li>
</ol>

<p>Throughout this documentation, we will use decorator as examples to encourage this cleaner and faster approach.</p>

<h3 id="collections">Collections</h3>

<p>Not everything is a scalar value. Sometimes an object’s property can be a collection of values. Use <code class="highlighter-rouge">collection</code> to represent arrays.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :id
  property :title
  collection :composer_ids
end
</code></pre>
</div>

<p>The new collection <code class="highlighter-rouge">composer_ids</code> has to be enumeratable object, like an array.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Song = Struct.new(:id, :title, :composer_ids)
song = Song.new(1, "Fallout", [2, 3])

song.to_json #=&gt; {"id": 1, title":"Fallout", composer_ids:[2,3]}
</code></pre>
</div>

<p>Of course, this works also for parsing. The incoming <code class="highlighter-rouge">composer_ids</code> will override the old collection on the represented object.</p>

<h3 id="nesting">Nesting</h3>

<p>Representable can also handle compositions of objects. This works for both <code class="highlighter-rouge">property</code> and <code class="highlighter-rouge">collection</code>.</p>

<p>For example, a song could nest an artist object.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Song   = Struct.new(:id, :title, :artist)
Artist = Struct.new(:id, :name)

artist = Artist.new(2, "The Police")
song = Song.new(1, "Fallout", artist)
</code></pre>
</div>

<p>Here’s a better view of that object graph.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>#&lt;struct Song
  id=1,
  title="Fallout",
  artist=#&lt;struct Artist
    id=2,
    name="The Police"&gt;&gt;
</code></pre>
</div>

<h3 id="inline-representer">Inline Representer</h3>

<p>The easiest way to nest representers is by using an inline representer.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :id
  property :title

  property :artist do
    property :id
    property :name
  end
end
</code></pre>
</div>

<p>Note that you can have any levels of nesting.</p>

<h3 id="explicit-representer">Explicit Representer</h3>

<p>Sometimes you want to compose two existing, stand-alone representers.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class ArtistRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :id
  property :name
end
</code></pre>
</div>

<p>To maximize reusability of representers, you can reference a nested representer using the <code class="highlighter-rouge">:decorator</code> option.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :id
  property :title

  property :artist, decorator: ArtistRepresenter
end
</code></pre>
</div>

<p>This is identical to an inline representer, but allows you to reuse <code class="highlighter-rouge">ArtistRepresenter</code> elsewhere.</p>

<p>Note that the <code class="highlighter-rouge">:extend</code> and <code class="highlighter-rouge">:decorator</code> options are identical. They can both reference a decorator or a module.</p>

<h3 id="nested-rendering">Nested Rendering</h3>

<p>Regardless of the representer types you use, rendering will result in a nested document.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>SongRepresenter.new(song).to_json
#=&gt; {"id": 1, title":"Fallout", artist:{"id":2, "name":"The Police"}}
</code></pre>
</div>

<h3 id="nested-parsing">Nested Parsing</h3>

<p>When parsing, per default Representable will want to instantiate an object for every nested, typed fragment.</p>

<p>You have to tell Representable what object to instantiate for the nested <code class="highlighter-rouge">artist:</code> fragment.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  # ..
  property :artist, decorator: ArtistRepresenter, class: Artist
end
</code></pre>
</div>

<p>This happens via the <code class="highlighter-rouge">:class</code> option. Now, the document can be parsed and a nested <code class="highlighter-rouge">Artist</code> will be created by the parsing.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>song = Song.new # nothing set.

SongRepresenter.new(song).
    from_json('{"id":1,title":"Fallout",artist:{"id":2,"name":"The Police"}}')

song.artist.name #=&gt; "The Police"
</code></pre>
</div>

<p>The default behavior is - admittedly - very primitive. Representable’s parsing allow rich mapping, object creation and runtime checks. Read about <a href="populator.html">populators</a> to learn how that works.</p>

<h3 id="document-nesting">Document Nesting</h3>

<p>Not always does the structure of the desired document map to your objects. The <code class="highlighter-rouge">::nested</code> method allows structuring properties within a separate section while still mapping the properties to the outer object.</p>

<p>Imagine the following document.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code><span class="p">{</span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roxanne"</span><span class="p">,</span><span class="w">
 </span><span class="nt">"details"</span><span class="p">:</span><span class="w">
   </span><span class="p">{</span><span class="nt">"track"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"length"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4:10"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>However, in the <code class="highlighter-rouge">Song</code> class, there’s no such concept as <code class="highlighter-rouge">details</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Song = Struct.new(:title, :track, :length)
</code></pre>
</div>

<p>Both track and length are properties of the song object itself. Representable gives you ::nested to map the virtual <code class="highlighter-rouge">details</code> section to the song instance.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :title

  nested :details do
    property :track
    property :length
  end
end
</code></pre>
</div>

<p>Accessors for the nested properties will still be called on the song object. And as always, this works both ways - for rendering and parsing.</p>

<h3 id="wrapping">Wrapping</h3>

<p>You can automatically wrap a document.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  self.representation_wrap= :song

  property :title
  property :id
end
</code></pre>
</div>

<p>This will add a container for rendering and parsing.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>SongRepresenter.new(song).to_json
#=&gt; {"song":{"title":"Fallout","id":1}}
</code></pre>
</div>

<p>Setting <code class="highlighter-rouge">self.representation_wrap = true</code> will advice representable to figure out the wrap itself by inspecting the represented object class.</p>

<p>Note that <code class="highlighter-rouge">representation_wrap</code> is a dynamic function option.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>self.representation_wrap = -&gt;(user_options:) { user_options[:my_wrap] }
</code></pre>
</div>

<p>This would allow to provide the wrap manually.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>decorator.to_json(user_options: { my_wrap: "hit" })
</code></pre>
</div>

<h3 id="suppressing-nested-wraps">Suppressing Nested Wraps</h3>

<p>When reusing a representer for a nested document, you might want to suppress its <code class="highlighter-rouge">representation_wrap=</code> for the nested fragment.</p>

<p>Reusing <code class="highlighter-rouge">SongRepresenter</code> from the last section in a nested setup allows suppressing the wrap via the <code class="highlighter-rouge">:wrap</code> option.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">AlbumRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">JSON</span>

  <span class="n">collection</span> <span class="ss">:songs</span><span class="p">,</span>
    <span class="ss">decorator: </span><span class="no">SongRepresenter</span><span class="p">,</span> <span class="c1"># SongRepresenter defines representation_wrap.</span>
     <span class="ss">wrap:     </span><span class="kp">false</span>            <span class="c1"># turn off :song wrap.</span>
<span class="k">end</span>
</code></pre>
</div>

<p>The <code class="highlighter-rouge">representation_wrap</code> from the nested representer now won’t be rendered and parsed.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="no">AlbumRepresenter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">album</span><span class="p">).</span><span class="nf">to_json</span>
<span class="c1">#=&gt; "{\"songs\": [{\"name\": \"Roxanne\"}]}"</span>
</code></pre>
</div>

<p>Note that this only works for JSON and Hash at the moment.</p>

<h3 id="inheritance">Inheritance</h3>

<p>Properties can be inherited across representer classes and modules.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :id
  property :title
end
</code></pre>
</div>

<p>What if you need a refined representer to also add the artist. Use inheritance.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongWithArtistRepresenter &lt; SongRepresenter
  property :artist do
    property :name
  end
end
</code></pre>
</div>

<p>All configuration from <code class="highlighter-rouge">SongRepresenter</code> will be inherited, making the properties on <code class="highlighter-rouge">SongWithArtistRepresenter</code>: <code class="highlighter-rouge">id</code>, <code class="highlighter-rouge">title</code>, and <code class="highlighter-rouge">artist</code>. The original <code class="highlighter-rouge">SongRepresenter</code> will stay as it is.</p>

<h3 id="composition">Composition</h3>

<p>You can also use modules and decorators together to compose representers.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>module GenericRepresenter
  include Representable::JSON

  property :id
end
</code></pre>
</div>

<p>This can be included in other representers and will extend their configuration.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include GenericRepresenter

  property :title
end
</code></pre>
</div>

<p>As a result, <code class="highlighter-rouge">SongRepresenter</code> will contain the good old <code class="highlighter-rouge">id</code> and <code class="highlighter-rouge">title</code> property.</p>

<h3 id="overriding-properties">Overriding Properties</h3>

<p>You might want to override a particular property in an inheriting representer. Successively calling <code class="highlighter-rouge">property(name)</code> will override the former definition - exactly as you know it from overriding methods in Ruby.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class CoverSongRepresenter &lt; SongRepresenter
  include Representable::JSON

  property :title, as: :name # overrides that definition.
end
</code></pre>
</div>

<h3 id="partly-overriding-properties">Partly Overriding Properties</h3>

<p>Instead of fully replacing a property, you can extend it with <code class="highlighter-rouge">:inherit</code>. This will <em>add</em> your new options and override existing options in case the one you provided already existed.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :title, as: :name, render_nil: true
end
</code></pre>
</div>

<p>You can now inherit properties but still override or add options.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class CoverSongRepresenter &lt; SongRepresenter
  include Representable::JSON

  property :title, as: :songTitle, default: "n/a", inherit: true
end
</code></pre>
</div>

<p>Using the :inherit, this will result in a property having the following options.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>property :title,
  as:         :songTitle, # overridden in CoverSongRepresenter.
  render_nil: true        # inherited from SongRepresenter.
  default:    "n/a"       # defined in CoverSongRepresenter.
</code></pre>
</div>

<p>The <code class="highlighter-rouge">:inherit</code> option works for both inheritance and module composition.</p>

<h3 id="inherit-with-inline-representers">Inherit With Inline Representers</h3>

<p><code class="highlighter-rouge">:inherit</code> also works applied with inline representers.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  property :title
  property :artist do
    property :name
  end
end
</code></pre>
</div>

<p>You can now override or add properties within the inline representer.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class HitRepresenter &lt; SongRepresenter
  include Representable::JSON

  property :artist, inherit: true do
    property :email
  end
end
</code></pre>
</div>

<p>Results in a combined inline representer as it inherits.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>property :artist do
  property :name
  property :email
end
</code></pre>
</div>

<p>Naturally, <code class="highlighter-rouge">:inherit</code> can be used within the inline representer block.</p>

<p>Note that the following also works.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class HitRepresenter &lt; SongRepresenter
  include Representable::JSON

  property :artist, as: :composer, inherit: true
end
</code></pre>
</div>

<p>This renames the property but still inherits all the inlined configuration.</p>

<p>Basically, <code class="highlighter-rouge">:inherit</code> copies the configuration from the parent property, then merges in your options from the inheriting representer. It exposes the same behaviour as <code class="highlighter-rouge">super</code> in Ruby - when using <code class="highlighter-rouge">:inherit</code> the property must exist in the parent representer.</p>

<h2 id="feature" data-magellan-target="feature">Feature</h2>

<p>If you need to include modules in all inline representers automatically, register it as a feature.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">AlbumRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">JSON</span>
  <span class="n">feature</span> <span class="no">Link</span> <span class="c1"># imports ::link</span>

  <span class="n">link</span> <span class="s2">"/album/1"</span>

  <span class="n">property</span> <span class="ss">:hit</span> <span class="k">do</span>
    <span class="n">link</span> <span class="s2">"/hit/1"</span> <span class="c1"># link method imported automatically.</span>
  <span class="k">end</span>
</code></pre>
</div>

<p>Nested representers will <code class="highlighter-rouge">include</code> the provided module automatically.</p>

<h2 id="execution-context" data-magellan-target="execution-context">Execution Context</h2>

<p>Readers and Writers for properties will usually be called on the <code class="highlighter-rouge">represented</code> object. If you want to change that, so the accessors get called on the decorator instead, use <code class="highlighter-rouge">:exec_context</code>.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">SongRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="n">property</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">exec_context: :decorator</span>

  <span class="k">def</span> <span class="nf">title</span>
    <span class="n">represented</span><span class="p">.</span><span class="nf">name</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="callable-options" data-magellan-target="callable-options">Callable Options</h2>

<p>While lambdas are one option for dynamic options, you might also pass a “callable” object to a directive.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">Sanitizer</span>
  <span class="kp">include</span> <span class="no">Uber</span><span class="o">::</span><span class="no">Callable</span>

  <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="n">represented</span><span class="p">,</span> <span class="n">fragment</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="n">fragment</span><span class="p">.</span><span class="nf">sanitize</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Note how including <code class="highlighter-rouge">Uber::Callable</code> marks instances of this class as callable. No <code class="highlighter-rouge">respond_to?</code> or other magic takes place here.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="n">property</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">parse_filter: </span><span class="no">Santizer</span><span class="p">.</span><span class="nf">new</span>
</code></pre>
</div>

<p>This is enough to have the <code class="highlighter-rouge">Sanitizer</code> class run with all the arguments that are usually passed to the lambda (preceded by the represented object as first argument).</p>

<h2 id="readwrite-restrictions" data-magellan-target="readwrite-restrictions">Read/Write Restrictions</h2>

<p>Using the <code class="highlighter-rouge">:readable</code> and <code class="highlighter-rouge">:writeable</code> options access to properties can be restricted.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="n">property</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">readable: </span><span class="kp">false</span>
</code></pre>
</div>

<p>This will leave out the <code class="highlighter-rouge">title</code> property in the rendered document. Vice-versa, <code class="highlighter-rouge">:writeable</code> will skip the property when parsing and does not assign it.</p>

<h2 id="coercion" data-magellan-target="coercion">Coercion</h2>

<p>If you need coercion when parsing a document you can use the Coercion module which uses <a href="https://github.com/solnic/virtus">virtus</a> for type conversion.</p>

<p>Include Virtus in your Gemfile, first.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="n">gem</span> <span class="s1">'virtus'</span><span class="p">,</span> <span class="s2">"&gt;= 0.5.0"</span>
</code></pre>
</div>

<p>Use the <code class="highlighter-rouge">:type</code> option to specify the conversion target. Note that <code class="highlighter-rouge">:default</code> still works.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">SongRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">JSON</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Coercion</span>

  <span class="n">property</span> <span class="ss">:recorded_at</span><span class="p">,</span> <span class="ss">type: </span><span class="no">DateTime</span><span class="p">,</span> <span class="ss">default: </span><span class="s2">"May 12th, 2012"</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Coercing values only happens when rendering or parsing a document. Representable does not create accessors in your model as <code class="highlighter-rouge">virtus</code> does.</p>

<p>Note that we think coercion in the representer is wrong, and should happen on the underlying object. We have a rich <a href="disposable/api.html#coercion">coercion/constraint API for twins</a>.</p>

<h2 id="symbol-keys" data-magellan-target="symbol-keys">Symbol Keys</h2>

<p>When parsing, Representable reads properties from hashes using their string keys.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="n">song</span><span class="p">.</span><span class="nf">from_hash</span><span class="p">(</span><span class="s2">"title"</span> <span class="o">=&gt;</span> <span class="s2">"Road To Never"</span><span class="p">)</span>
</code></pre>
</div>

<p>To allow symbol keys also include the <code class="highlighter-rouge">AllowSymbols</code> module.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">SongRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Hash</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Hash</span><span class="o">::</span><span class="no">AllowSymbols</span>
  <span class="c1"># ..</span>
<span class="k">end</span>
</code></pre>
</div>

<p>This will give you a behavior close to Rails’ <code class="highlighter-rouge">HashWithIndifferentAccess</code> by stringifying the incoming hash internally.</p>

<h2 id="defaults" data-magellan-target="defaults">Defaults</h2>

<p>The <code class="highlighter-rouge">defaults</code> method allows setting options that will be applied to all property definitions of a representer.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  defaults render_nil: true

  property :id
  property :title
end
</code></pre>
</div>

<p>This will include <code class="highlighter-rouge">render_nil: true</code> in both <code class="highlighter-rouge">id</code> and <code class="highlighter-rouge">title</code> definitions, as if you’d provided that option each time.</p>

<p>You can also have dynamic option computation at compile-time.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  defaults do |name, options|
    { as: name.camelize }
  end
</code></pre>
</div>

<p>The <code class="highlighter-rouge">options</code> hash combines the user’s and Representable computed options.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>property :id, skip: true

defaults do |name, options|
  options[:skip] ? { as: name.camelize } : {}
end
</code></pre>
</div>

<p>Note that the dynamic <code class="highlighter-rouge">defaults</code> block always has to return a hash.</p>

<p>Combining those two forms also works.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongRepresenter &lt; Representable::Decorator
  include Representable::JSON

  defaults render_nil: true do |name|
    { as: name.camelize }
  end
</code></pre>
</div>

<p>All defaults are inherited to subclasses or including modules.</p>

<h2 id="standalone-hash" data-magellan-target="standalone-hash">Standalone Hash</h2>

<p>If it’s required to represent a bare hash object, use <code class="highlighter-rouge">Representable::JSON::Hash</code> instead of <code class="highlighter-rouge">Representable::JSON</code>.</p>

<p>This is sometimes called a <em>lonely hash</em>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>require "representable/json/hash"

class SongsRepresenter &lt; Representable::Decorator
  include Representable::JSON::Hash
end
</code></pre>
</div>

<p>You can then use this hash decorator on instances of <code class="highlighter-rouge">Hash</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>hash = {"Nick" =&gt; "Hyper Music", "El" =&gt; "Blown In The Wind"}
SongsRepresenter.new(hash).to_json
#=&gt; {"Nick":"Hyper Music","El":"Blown In The Wind"}
</code></pre>
</div>

<p>This works both ways.</p>

<p>A lonely hash starts to make sense especially when the values are nested objects that need to be represented, too. You can configure the nested value objects using the <code class="highlighter-rouge">values</code> method. This works exactly as if you were defining an inline representer, accepting the same options.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongsRepresenter &lt; Representable::Decorator
  include Representable::JSON::Hash

  values class: Song do
    property :title
  end
end
</code></pre>
</div>

<p>You can now represents nested objects in the hash, both rendering and parsing-wise.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>hash = {"Nick" =&gt; Song.new("Hyper Music")}
SongsRepresenter.new(hash).to_json
</code></pre>
</div>

<p>In XML, use <code class="highlighter-rouge">XML::Hash</code>. If you want to store hash attributes in tag attributes instead of dedicated nodes, use <code class="highlighter-rouge">XML::AttributeHash</code>.</p>

<h2 id="standalone-collection" data-magellan-target="standalone-collection">Standalone Collection</h2>

<p>Likewise, you can represent <em>lonely collections</em>, instances of <code class="highlighter-rouge">Array</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>require "representable/json/collection"

class SongsRepresenter &lt; Representable::Decorator
  include Representable::JSON::Collection

  items class: Song do
    property :title
  end
end
</code></pre>
</div>

<p>Here, you define how to represent items in the collection using <code class="highlighter-rouge">items</code>.</p>

<p>Note that the items can be simple scalar values or deeply nested objects.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>ary = [Song.new("Hyper Music"), Song.new("Screenager")]
SongsRepresenter.new(ary).to_json
#=&gt; [{"title":"Hyper Music"},{"title":"Screenager"}]
</code></pre>
</div>

<p>Note that this also works for XML.</p>

<h2 id="standalone-collection-toa" data-magellan-target="standalone-collection-toa">Standalone Collection: to_a</h2>

<p>Another trick to represent collections is using a normal representer with exactly one collection property named <code class="highlighter-rouge">to_a</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>class SongsRepresenter &lt; Representable::Decorator
  include Representable::JSON # note that this is a plain representer.

  collection :to_a, class: Song do
    property :title
  end
end
</code></pre>
</div>

<p>You can use this representer the way you already know and appreciate, but directly on an array.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>ary = []
SongsRepresenter.new(ary).from_json('[{"title": "Screenager"}]')
</code></pre>
</div>

<p>In order to grab the collection for rendering or parsing, Representable will now call <code class="highlighter-rouge">array.to_a</code>, which returns the array itself.</p>

<h2 id="automatic-collection-representer" data-magellan-target="automatic-collection-representer">Automatic Collection Representer</h2>

<p>Instead of explicitly defining representers for collections using a <a href="#standalone-collection">“lonely collection”</a>, you can let Representable  do that for you.</p>

<p>You define a singular representer, Representable will infer the collection representer.</p>

<p>Rendering a collection of objects comes for free, using <code class="highlighter-rouge">for_collection</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>songs = Song.all
SongRepresenter.for_collection.new(songs).to_json
#=&gt; '[{"title": "Sevens"}, {"title": "Eric"}]'
</code></pre>
</div>

<p><code class="highlighter-rouge">SongRepresenter.for_collection</code> will return a collection representer class.</p>

<p>For parsing, you need to provide the class for the nested items. This happens via <code class="highlighter-rouge">collection_representer</code> in the representer class.</p>

<div class="language-ruby highlighter-rouge">
<pre class="highlight"><code><span class="k">class</span> <span class="nc">SongsRepresenter</span> <span class="o">&lt;</span> <span class="no">Representable</span><span class="o">::</span><span class="no">Decorator</span>
  <span class="kp">include</span> <span class="no">Representable</span><span class="o">::</span><span class="no">JSON</span>
  <span class="n">property</span> <span class="ss">:title</span>

  <span class="n">collection_representer</span> <span class="ss">class: </span><span class="no">Song</span>
<span class="k">end</span>
</code></pre>
</div>

<p>You can now parse collections to <code class="highlighter-rouge">Song</code> instances.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>json  = '[{"title": "Sevens"}, {"title": "Eric"}]'

SongRepresenter.for_collection.new([]).from_json(json)
</code></pre>
</div>

<p>Note: the implicit collection representer internally is implemented using a lonely collection. Everything you pass to <code class="highlighter-rouge">::collection_representer</code> is simply provided to the <code class="highlighter-rouge">::items</code> call in the lonely collection. That allows you to use <code class="highlighter-rouge">:populator</code> and all the other goodies, too.</p>

<h2 id="automatic-singular-and-collection" data-magellan-target="automatic-singular-and-collection">Automatic Singular and Collection</h2>

<p>In case you don’t want to know whether or not you’re working with a collection or singular model, use <code class="highlighter-rouge">represent</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code># singular
SongRepresenter.represent(Song.find(1)).to_json
#=&gt; '{"title": "Sevens"}'

# collection
SongRepresenter.represent(Song.all).to_json
#=&gt; '[{"title": "Sevens"}, {"title": "Eric"}]' ```
</code></pre>
</div>

<p><code class="highlighter-rouge">represent</code> figures out the correct representer for you. This works for parsing, too.</p>

<h2 id="public-api" data-magellan-target="public-api">Public API</h2>

<p>When decorating an object with a representer, the object needs to provide readers for every defined <code class="highlighter-rouge">property</code> - and writers, if you’re planning to parse.</p>

<h3 id="accessors">Accessors</h3>

<p>In our small <code class="highlighter-rouge">SongRepresenter</code> example, the represented object has to provide <code class="highlighter-rouge">#id</code> and <code class="highlighter-rouge">#title</code> for rendering.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>Song = Struct.new(:id, :title)
song = Song.new(1, "Fallout")
</code></pre>
</div>

<h3 id="rendering">Rendering</h3>

<p>You can render the document by decorating the object and calling the serializer method.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>SongRepresenter.new(song).to_json #=&gt; {"id":1, title":"Fallout"}
</code></pre>
</div>

<p>When rendering, the document fragment is read from the represented object using the getter (e.g. <code class="highlighter-rouge">Song#id</code>).</p>

<p>Since we use <code class="highlighter-rouge">Representable::JSON</code> the serializer method is <code class="highlighter-rouge">#to_json</code>.</p>

<p>For other format engines the serializer method will have the following name.</p>

<ul>
  <li><code class="highlighter-rouge">Representable::JSON#to_json</code></li>
  <li>
<code class="highlighter-rouge">Representable::JSON#to_hash</code> (provides a hash instead of string)</li>
  <li><code class="highlighter-rouge">Representable::Hash#to_hash</code></li>
  <li><code class="highlighter-rouge">Representable::XML#to_xml</code></li>
  <li><code class="highlighter-rouge">Representable::YAML#to_yaml</code></li>
</ul>

<h3 id="parsing">Parsing</h3>

<p>Likewise, parsing will read values from the document and write them to the represented object.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>song = Song.new
SongRepresenter.new(song).from_json('{"id":1, "title":"Fallout"}')
song.id    #=&gt; 1
song.title #=&gt; "Fallout"
</code></pre>
</div>

<p>When parsing, the read fragment is written to the represented object using the setter (e.g. <code class="highlighter-rouge">Song#id=</code>).</p>

<p>For other format engines, the deserializing method is named analogue to the serializing counterpart, where <code class="highlighter-rouge">to</code> becomes <code class="highlighter-rouge">from</code>. For example, <code class="highlighter-rouge">Representable::XML#from_xml</code> will parse XML if the format engine is mixed into the representer.</p>

<h3 id="user-options">User Options</h3>

<p>You can provide options when representing an object using the <code class="highlighter-rouge">user_options:</code> option.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>decorator.to_json(user_options: { is_admin: true })
</code></pre>
</div>

<p>Note that the <code class="highlighter-rouge">:user_options</code> will be accessable on all levels in a nested representer. They act like a “global” configuration and are passed to all option functions.</p>

<p>Here’s an example where the <code class="highlighter-rouge">:if</code> option function evaluates a dynamic user option.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>property :id, if: -&gt;(options) { options[:user_options][:is_admin] }
</code></pre>
</div>

<p>This property is now only rendered or parsed when <code class="highlighter-rouge">:is_admin</code> is true.</p>

<p>Using Ruby 2.1’s keyword arguments is highly recommended - to make that look a bit nicer.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>property :id, if: -&gt;(user_options:, **) { user_options[:is_admin] }
</code></pre>
</div>

<h3 id="nested-user-options">Nested User Options</h3>

<p>Representable also allows passing nested options to particular representers. You have to provide the property’s name to do so.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>decorator.to_json(artist: { user_options: { is_admin: true } })
</code></pre>
</div>

<p>This will pass the option to the nested <code class="highlighter-rouge">artist</code>, only. Note that this works with any level of nesting.</p>

<h3 id="include-and-exclude">Include and Exclude</h3>

<p>Representable supports two top-level options.</p>

<p><code class="highlighter-rouge">:include</code> allows defining a set of properties to represent. The remaining will be skipped.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>decorator.to_json(include: [:id])  #=&gt; {"id":1}
</code></pre>
</div>

<p>The other, <code class="highlighter-rouge">:exclude</code>, will - you might have guessed it already - skip the provided properties and represent the remaining.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>decorator.to_json(exclude: [:id, :artist])  #=&gt; {"title":"Fallout"}
</code></pre>
</div>

<p>As always, these options work both ways, for rendering <em>and</em> parsing.</p>

<p>Note that you can also nest <code class="highlighter-rouge">:include</code> and <code class="highlighter-rouge">:exclude</code>.</p>

<div class="highlighter-rouge">
<pre class="highlight"><code>decorator.to_json(artist: { include: [:name] })
#=&gt; {"id":1, "title":"Fallout", "artist":{"name":"Sting"}}
</code></pre>
</div>

<h3 id="tohash-and-fromhash">to_hash and from_hash</h3>

            </div>

            <div class="large-3 columns sticky-container" data-sticky-container>

              
                <nav class="sticky columns docs-toc-wrap sticky is-anchored is-at-top side-nav" data-sticky data-anchor="docs" data-sticky-on="large" data-margin-top="5">
  
        <ul class="vertical menu" data-magellan id="page-toc">
          <li class="page-toc-heading">ON THIS PAGE:</li>
          <li><a href="#declarative-api">Declarative API</a></li>
<li><a href="#feature">Feature</a></li>
<li><a href="#execution-context">Execution Context</a></li>
<li><a href="#callable-options">Callable Options</a></li>
<li><a href="#readwrite-restrictions">Read/Write Restrictions</a></li>
<li><a href="#coercion">Coercion</a></li>
<li><a href="#symbol-keys">Symbol Keys</a></li>
<li><a href="#defaults">Defaults</a></li>
<li><a href="#standalone-hash">Standalone Hash</a></li>
<li><a href="#standalone-collection">Standalone Collection</a></li>
<li><a href="#standalone-collection-toa">Standalone Collection: to_a</a></li>
<li><a href="#automatic-collection-representer">Automatic Collection Representer</a></li>
<li><a href="#automatic-singular-and-collection">Automatic Singular and Collection</a></li>
<li><a href="#public-api">Public API</a></li>
        </ul>
      
</nav>

              

            </div>
          </div>
        </article>
      </div>

      <div class="medium-3 large-2 medium-pull-9 large-pull-10 columns">
        <ul class="vertical menu side-nav">
    <li class="heading">
        <a href="/gems/operation/index.html">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> OPERATION
        </a>
    </li>
    <li><a href="/gems/operation/api.html">API</a></li>
    <li><a href="/gems/operation/contract.html">Contract</a></li>
    <li><a href="/gems/operation/builder.html"><strike>Builder</strike></a></li>
    <li><a href="/gems/operation/collection.html"><strike>Collection</strike></a></li>
    <li><a href="/gems/operation/callback.html">Callback</a></li>
    <li><a href="/gems/operation/controller.html"><strike>Controller</strike><span class="sidebar-info">v1.1</span></a></li>
    <li><a href="/gems/operation/representer.html">Representer</a></li>
    <li><a href="/gems/operation/model.html"><strike>Model</strike></a></li>
    <li><a href="/gems/operation/policy.html">Policy</a></li>
<!--     <li><a href="/gems/operation/2.0/pipetree.html">Pipetree</a></li>
 -->
    <li><a href="/gems/operation/2.0/endpoint.html">Endpoint</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/gems/trailblazer/index.html">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> TRAILBLAZER
        </a>
    </li>
    <li><a href="/gems/trailblazer/2.0/rails.html">Rails</a></li>
    <li><a href="/gems/trailblazer/loader.html">Loader</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/gems/cells">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> CELLS
        </a>
    </li>
    <li><a href="/gems/cells/getting-started.html">Getting Started<span class="sidebar-info">NEW</span></a></li>
    <li><a href="/gems/cells/api.html">API</a></li>
    <li><a href="/gems/cells/trailblazer.html">Trailblazer::Cell</a></li>
    <li><a href="/gems/cells/testing.html">Testing</a></li>
    <li><a href="/gems/cells/render.html">Rendering</a></li>
    <li><a href="/gems/cells/rails.html">Rails</a></li>
    <li><a href="/gems/cells/templates.html">Templates</a></li>
    <li><a href="/gems/cells/troubleshooting.html">Troubleshooting</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/gems/reform">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> REFORM
        </a>
    </li>
    <li><a href="/gems/reform/api.html">API</a></li>
    <li><a href="/gems/reform/options.html">Options</a></li>
    <li><a href="/gems/reform/data-types.html">Data Types</a></li>
    <li><a href="/gems/reform/populator.html">Populator</a></li>
    <li><a href="/gems/reform/prepopulator.html">Prepopulator</a></li>
    <li><a href="/gems/reform/validation.html">Validation</a></li>
    <li><a href="/gems/reform/rails.html">Rails</a></li>
    <li><a href="/gems/reform/debugging.html">Debugging</a></li>
    <li><a href="/gems/reform/upgrading-guide.html">Upgrading Guide</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/gems/representable">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> REPRESENTABLE
        </a>
    </li>
    <li><a href="/gems/representable/getting-started.html">Getting Started</a></li>
    <li><a href="/gems/representable/3.0/api.html" class="active">API</a></li>
    <li><a href="/gems/representable/3.0/function-api.html">Function API</a></li>
    <li><a href="/gems/representable/3.0/populator.html">Populator</a></li>
    <!-- <li><a href="/gems/representable/architecture.html">Architecture</a></li> -->
    <li><a href="/gems/representable/3.0/xml.html">XML</a></li>
    <li><a href="/gems/representable/3.0/yaml.html">YAML</a></li>
    <li><a href="/gems/representable/upgrading-guide.html">Upgrading Guide</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/gems/roar">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> ROAR
        </a>
    </li>
    <li><a href="/gems/roar/jsonapi.html">JSON API</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/gems/disposable">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> DISPOSABLE
        </a>
    </li>
    <li><a href="/gems/disposable/api.html">API</a></li>
    <li><a href="/gems/disposable/default.html">Default</a></li>
    <li><a href="/gems/disposable/callback.html">Callback</a></li>
    <li class="divider">

    <li class="heading">
        <a href="/guides">
            <i class="fa fa-caret-square-o-right" aria-hidden="true"></i> GUIDES
        </a>
    </li>
    <li><a href="/guides/trailblazer-in-20-minutes.html">Trailblazer In 20 Minutes</a></li>
    <li><a href="/guides/getting-started.html">Getting Started</a></li>
    <li><a href="/guides/sinatra/getting-started.html">Sinatra</a></li>
    <li><a href="/guides/grape.html">Grape</a></li>
</ul>

      </div>
    </div>


    <section class="top-footer">
  <div class="row">
    <div class="columns medium-6">
      <h3>Newsletter</h3>
      <p>
        Stay on top of what’s happening in Trailblazer.
      </p>
        <div class="row">
          <div id="mc_embed_signup">
            <form action="//trailblazerb.us8.list-manage.com/subscribe/post?u=bbe5021ab6fbdc94a16f0d036&amp;id=a69f6e4652" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>

              <div class="columns large-9 medium-12 ">
                <div class="row collapse prefix-radius">
                  <div class="small-8 medium-7 large-8 columns">
                    <div id="mc_embed_signup_scroll">
                      <div class="mc-field-group">
                        <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="youremail@trailblazer.to">
                      </div>
                      <div id="mce-responses" class="clear">
                        <div class="response" id="mce-error-response" style="display:none"></div>
                        <div class="response" id="mce-success-response" style="display:none"></div>
                      </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_bbe5021ab6fbdc94a16f0d036_a69f6e4652" tabindex="-1" value=""></div>

                    </div>
                  </div>
                  <div class="small-4 medium-5 large-4 columns">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button postfix secondary">
                  </div>
                </div>
              </div>
            </form>
          </div>
          <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script><script type="text/javascript">(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
        </div>
      <p>
        And check out the <a href="/newsletter/">archive of newsletters</a>!
      </p>


    </div>
    <div class="columns medium-6">
      <h3>The Book</h3>
      <p>Learn how to build a Rails app with Trailblazer, step-by-step.</p>
      <a href="https://leanpub.com/trailblazer" class="button secondary">Get the book!</a>
    </div>
  </div>
</section>

<footer>
  <div class="row">
    <div class="columns medium-4">
      <div class="logo-box">
        <a href="/"><img src="/images/icon_trb.png">
        </a>
      </div>
    </div>
    <div class="columns medium-8">
      <div class="row">
        <div class="columns medium-6">
          <h4>
            Trailblazer
          </h4>
          <ul class="no-bullet">
            <li><a href="https://gitter.im/trailblazer/chat">Gitter chat</a></li>
            <li><a href="https://leanpub.com/trailblazer" onclick="trackOutboundLink('https://leanpub.com/trailblazer'); return false;">The book</a></li>
          </ul>
        </div>
        <div class="columns medium-6">
          <h4>
            Follow Us
          </h4>
          <ul class="menu">
            <li>
              <a href="https://github.com/trailblazer">
                <i class="footer-icon github-icon"></i>
              </a>
            </li>
            <li>
              <a href="https://twitter.com/apotonick">
                <i class="footer-icon twitter-icon"></i>
              </a>
            </li>
            <li>
              <a href="https://facebook.com/trbinc">
                <i class="footer-icon facebook-icon"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <p class="copyright">
        Trailblazer is created by <a href="http://www.synergysoft.com.sg/">Synergy Software Solutions Pte Ltd,</a> and awesome friends.
      </p>
      <p class="copyright">
        Site designed and handcoded with love by <a href="https://twitter.com/noeliacabane">Noelia Cabane</a>
      </p>
    </div>
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69514939-1', 'auto');
  ga('send', 'pageview');

  /**
  * Function that tracks a click on an outbound link in Analytics.
  * This function takes a valid URL string as an argument, and uses that URL string
  * as the event label. Setting the transport method to 'beacon' lets the hit be sent
  * using 'navigator.sendBeacon' in browser that support it.
  */
  var trackOutboundLink = function(url) {
     ga('send', 'event', 'outbound', 'click', url, {
       'transport': 'beacon',
       'hitCallback': function(){document.location = url;}
     });
  }
</script>



  </body>
</html>
